<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Gestão de Pedido Simplificado</title>
  <style>
      * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body {
    font-family: 'Arial', sans-serif;
    background-color: #f8f9fa;
    color: #495057;
    padding: 20px;
  }

  h2 {
    text-align: center;
    margin-bottom: 20px;
    font-size: 2rem;
    color: #343a40;
  }

 
  form#formAdicionar {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin-bottom: 20px;
  }

  form#formAdicionar input,
  form#formAdicionar button {
    padding: 10px 15px;
    border-radius: 0.375rem;
    border: 1px solid #ced4da;
    font-size: 14px;
  }

  form#formAdicionar input {
    width: 200px;
  }

  form#formAdicionar input:focus {
    outline: none;
    border-color: #80bdff;
    box-shadow: 0 0 0 0.25rem rgba(38, 143, 255, 0.25);
  }

  form#formAdicionar button {
    background-color: #007bff;
    color: white;
    border: 1px solid #007bff;
    cursor: pointer;
    transition: background-color 0.3s, border-color 0.3s;
  }

  form#formAdicionar button:hover {
    background-color: #0056b3;
    border-color: #004085;
  }

  
  table {
    width: 100%;
    margin-top: 20px;
    border-collapse: collapse;
  }

  th, td {
    padding: 12px;
    text-align: center;
    border: 1px solid #dee2e6;
  }

  th {
    background-color: black;
    color: white;
  }

  tr:nth-child(even) {
    background-color: #f2f2f2;
  }

  tr:hover {
    background-color: #e9ecef;
  }

  tfoot {
    background-color: #f8f9fa;
  }

  tfoot td {
    font-weight: bold;
  }

  
  button {
    padding: 6px 12px;
    font-size: 14px;
    border-radius: 0.375rem;
    cursor: pointer;
  }

  button[onclick^="editarPedido"] {
    background-color: #ffc107;
    color: black;
    border: 1px solid #ffc107;
  }

  button[onclick^="excluirPedido"] {
    background-color: #dc3545;
    color: black;
    border: 1px solid #dc3545;
  }

  button:hover {
    opacity: 0.85;
  }

  button[onclick^="editarPedido"]:hover {
    background-color: #e0a800;
    border-color: #e0a800;
  }

  button[onclick^="excluirPedido"]:hover {
    background-color: #c82333;
    border-color: #c82333;
  }

  
  @media (max-width: 768px) {
    form#formAdicionar {
      flex-direction: column;
      align-items: center;
    }

    form#formAdicionar input,
    form#formAdicionar button {
      width: 100%;
    }
  }
  </style>
</head>
<body>
  <h2>Lista de Itens do Pedido</h2>

  <form id="formAdicionar">
    <input name="item" placeholder="Item" required />
    <input name="quantidade" type="number" min="1" placeholder="Quantidade" required />
    <input name="valorUnitario" type="number" min="0" step="0.01" placeholder="Valor Unit." required />
    <button type="submit">Adicionar</button>
  </form>

  <table id="tabelaPedido" style="margin-top:20px; width: 100%;">
    <thead>
      <tr>
        <th>ID</th>
        <th>Item</th>
        <th>Quantidade</th>
        <th>Valor Unitário (R$)</th>
        <th>Valor Total (R$)</th>
        <th>Ações</th>
      </tr>
    </thead>
    <tbody></tbody>
    <tfoot>
      <tr>
        <td colspan="4" style="text-align:right; font-weight:bold;">Total Geral:</td>
        <td colspan="2" id="totalGeral" style="font-weight:bold;">R$ 0,00</td>
      </tr>
    </tfoot>
  </table>

<script>
  let pedidos = [];
  let contadorId = 1;

  function formatar(valor) {
    return "R$ " + valor.toFixed(2).replace(".", ",");
  }

  function atualizarTabela() {
    const tbody = document.querySelector("#tabelaPedido tbody");
    tbody.innerHTML = "";
    let totalGeral = 0;

    pedidos.forEach(pedido => {
      const valorTotal = pedido.quantidade * pedido.valorUnitario;
      totalGeral += valorTotal;

      const tr = document.createElement("tr");
      tr.innerHTML = `
        <td>${pedido.id}</td>
        <td>${pedido.item}</td>
        <td>${pedido.quantidade}</td>
        <td>${formatar(pedido.valorUnitario)}</td>
        <td>${formatar(valorTotal)}</td>
        <td>
          <button onclick="editarPedido(${pedido.id})">Editar</button>
          <button onclick="excluirPedido(${pedido.id})">Excluir</button>
        </td>
      `;
      tbody.appendChild(tr);
    });

    document.getElementById("totalGeral").textContent = formatar(totalGeral);
  }

  document.getElementById("formAdicionar").addEventListener("submit", function(event) {
    event.preventDefault();

    const formData = new FormData(this);
    const item = formData.get("item");
    const quantidade = parseInt(formData.get("quantidade"));
    const valorUnitario = parseFloat(formData.get("valorUnitario"));

    pedidos.push({
      id: contadorId++,
      item,
      quantidade,
      valorUnitario
    });

    this.reset();
    atualizarTabela();
  });

  function editarPedido(id) {
    const pedido = pedidos.find(p => p.id === id);
    if (!pedido) return alert("Pedido não encontrado");

    const novoItem = prompt("Editar item:", pedido.item);
    if (novoItem === null) return; // cancelou

    let novaQuantidade = prompt("Editar quantidade:", pedido.quantidade);
    if (novaQuantidade === null) return;
    novaQuantidade = parseInt(novaQuantidade);
    if (isNaN(novaQuantidade) || novaQuantidade < 1) {
      alert("Quantidade inválida");
      return;
    }

    let novoValor = prompt("Editar valor unitário:", pedido.valorUnitario.toFixed(2).replace('.', ','));
    if (novoValor === null) return;
    // Trocar vírgula por ponto e converter para número
    novoValor = parseFloat(novoValor.replace(',', '.'));
    if (isNaN(novoValor) || novoValor < 0) {
      alert("Valor unitário inválido");
      return;
    }

    pedido.item = novoItem;
    pedido.quantidade = novaQuantidade;
    pedido.valorUnitario = novoValor;

    atualizarTabela();
  }

  function excluirPedido(id) {
    if (confirm("Deseja realmente excluir este item?")) {
      pedidos = pedidos.filter(p => p.id !== id);
      atualizarTabela();
    }
  }

  atualizarTabela();
</script>
</body>
</html>